<div class="mr-3" style="float: left">
  <canvas #curveGrid class="curve-grid" width="200" height="100" viewBox="150 -75 4850 5150"
    preserveAspectRatio="none"></canvas>
</div>

<div class="mr-4" style="float: left">
  <div class="d-flex">
    <div class="my-auto" style="width: 100px; float: left;">
      Length
    </div>
    <div class="my-auto" style="float: left;">
      <mv-slider (change)="redraw()" [(value)]="curve.lengthMillis" style="width: 80px;" [tooltip]="'hide'" [value]="0"
        [min]="50" [max]="2500" [step]="1"></mv-slider>
    </div>
    <div class="my-auto">
      <input type="text" class="slider-input" [(ngModel)]="curve.lengthMillis">
    </div>
  </div>

  <div class="d-flex">
    <div class="my-auto" style="width: 100px; float: left;">
      Amplitude
    </div>
    <div class="my-auto" style="float: left;">
      <mv-slider (change)="redraw()" [(value)]="curve.amplitude" style="width: 80px;" [tooltip]="'hide'" [min]="0"
        [max]="400" [step]="1"></mv-slider>
    </div>
    <div class="my-auto">
      <input type="text" class="slider-input" [(ngModel)]="curve.amplitude">
    </div>
  </div>

  <div class="d-flex">
    <div class="my-auto" style="width: 100px; float: left;">
      Position
    </div>
    <div class="my-auto" style="float: left;">
      <mv-slider (change)="redraw()" [(value)]="curve.position" style="width: 80px; height: 18px;" [tooltip]="'hide'"
        [min]="0" [max]="100" [step]="1"></mv-slider>
    </div>
    <div class="my-auto">
      <input type="text" class="slider-input" [(ngModel)]="curve.position">
    </div>
  </div>

  <div class="d-flex">
    <div class="my-auto" style="width: 100px; float: left;">
      Phase
    </div>
    <div class="my-auto" style="float: left;">
      <mv-slider (change)="redraw()" [(value)]="curve.phaseMillis" style="width: 80px; height: 18px;" [tooltip]="'hide'"
        [min]="-1000" [max]="1000" [step]="1"></mv-slider>
    </div>
    <div class="my-auto">
      <input type="text" class="slider-input" [(ngModel)]="curve.phaseMillis">
    </div>
  </div>

  <div class="d-flex">
    <div class="my-auto" style="width: 100px; float: left;">
      Chase
    </div>
    <div class="my-auto" style="float: left;">
      <mv-slider (change)="redraw()" [(value)]="curve.phasingMillis" style="width: 80px; height: 18px;"
        [tooltip]="'hide'" [min]="0" [max]="700" [step]="1"></mv-slider>
    </div>
    <div class="my-auto">
      <input type="text" class="slider-input" [(ngModel)]="curve.phasingMillis">
    </div>
  </div>
</div>

<!-- Menu for the capabilities and channels-->
<div class="col col-auto p-0" style="margin-right: 1px; width: 50px; float: left">
  <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    <a class="nav-link px-3 active" id="v-pills-effect-capabilities-tab"
      popover="{{ 'designer.misc.capabilities' | translate }}" container="body" placement="right"
      triggers="mouseenter:mouseleave" data-toggle="pill" href="#v-pills-effect-capabilities" role="tab"
      aria-controls="v-pills-capabilities" aria-selected="true">
      <i class="fa fa-bolt fa-fw" aria-hidden="true"></i>
    </a>
    <a class="nav-link px-3" id="v-pills-effect-channels-tab" popover="{{ 'designer.misc.channels' | translate }}"
      container="body" placement="right" triggers="mouseenter:mouseleave" data-toggle="pill"
      href="#v-pills-effect-channels" role="tab" aria-controls="v-pills-channels" aria-selected="false">
      <i class="fa fa-sliders fa-fw" aria-hidden="true"></i>
    </a>
  </div>
</div>

<div class="h-100" class="applying-to">
  <div class="tab-content h-100" id="v-pills-tabContent">
    <div class="tab-pane h-100 show active" id="v-pills-effect-capabilities" role="tabpanel">

      <!-- Capabilities-->
      <div *ngFor="let capability of availableCapabilities; let i = index;" class="form-check">
        <input type="checkbox" class="form-check-input" id="capability_{{ curve?.uuid + '_' + i }}"
          [ngModel]="capabilityChecked(capability)" (change)="toggleCapability($event, capability)">
        <label class="form-check-label"
          for="capability_{{ curve?.uuid + '_' + i }}">{{ getCapabilityName(capability) | async }}</label>
      </div>

    </div>
    <div class="tab-pane h-100 show" id="v-pills-effect-channels" role="tabpanel">
      <!-- channels -->

      <!-- profile selection -->
      <div *ngIf="availableProfiles.length > 1">
        <div *ngFor="let profile of availableProfiles; let i = index" class="form-check">
          <input type="checkbox" class="form-check-input" id="channel_profile_{{ curve?.uuid }}_{{ profile.uuid }}"
            [ngModel]="selectedProfiles.indexOf(profile) >= 0" (change)="changeProfileSelection($event, profile)">
          <label class="form-check-label"
            for="channel_profile_{{ curve?.uuid }}_{{ profile.uuid }}">{{ profile.name }}</label>
        </div>

        <hr class="my-1" style="border-color: white;"/>
      </div>

      <!-- channels -->
      <ng-container *ngFor="let entry of availableChannels | keyvalue; let i = index">
        <div *ngFor="let channel of entry.value; let j = index" class="form-check">

          <input type="checkbox" class="form-check-input" id="channel_{{ curve?.uuid }}_{{ i }}_{{ j }}"
            [ngModel]="channelChecked(entry.key, channel)" (change)="toggleChannel($event, entry.key, channel)">
          <label class="form-check-label" for="channel_{{ curve?.uuid }}_{{ i }}_{{ j }}">{{ getChannelName(entry.key.name, channel.channelName) }}</label>

        </div>
      </ng-container>

    </div>
  </div>
</div>