<div class="card border-secondary panel h-100">
  <div class="card-body capability-container" *ngIf="presetService.selectedPreset">

    <div class="m-3">
      <accordion [closeOthers]="true">
        <accordion-group *ngFor="let item of presetService.selectedPreset.effects; let i = index"
          [isOpen]="effectService.selectedEffect == item" (isOpenChange)="openEffect(item, $event)"
          style="margin-top: 1px;">

          <button class="btn btn-link btn-block clearfix" accordion-heading>
            <div class="pull-left float-left d-flex w-100">
              <i *ngIf="item.constructor.name == 'EffectCurve'" class="fa fa-area-chart fa-fw my-auto" aria-hidden="true"></i>
              <i *ngIf="item.constructor.name == 'EffectPanTilt'" class="fa fa-arrows-alt fa-fw my-auto" aria-hidden="true"></i>
              <span class="ml-2">{{ item.constructor.name }}</span>
              <div class="ml-auto mr-2">
                <i *ngIf="item == effectService.selectedEffect" class="fa fa-caret-down" aria-hidden="true"></i>
                <i *ngIf="item != effectService.selectedEffect" class="fa fa-caret-right" aria-hidden="true"></i>
              </div>
            </div>
          </button>

          <div *ngIf="item.constructor.name == 'EffectCurve'" style="min-width: 670px;">
            <app-effect-curve [curve]="item" [isSelected]="item == effectService.selectedEffect"></app-effect-curve>
          </div>

          <div *ngIf="item.constructor.name == 'EffectPanTilt'" style="min-width: 500px;">
            <app-effect-pan-tilt></app-effect-pan-tilt>
          </div>

        </accordion-group>
      </accordion>

      <div class="d-flex mx-auto mt-3">
        <div class="dropdown show d-flex">
          <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-plus" aria-hidden="true"></i> Add new effect
          </a>

          <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="#" (click)="addCurveEffect(); false;">
              <i class="fa fa-area-chart fa-fw" aria-hidden="true"></i> Curve</a>
            <!-- <a class="dropdown-item" href="#" (click)="addPanTiltEffect()">
              <i class="fa fa-arrows-alt fa-fw" aria-hidden="true"></i> Pan/Tilt</a> -->
          </div>
        </div>
      </div>
    </div>
  </div>

</div>